
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Integration of Qiskit Primitive into Prefect">
      
      
      
      
        <link rel="prev" href="../..">
      
      
        <link rel="next" href="../../contribution/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.13">
    
    
      
        <title>Getting Started - Prefect Qiskit Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter,+sans-serif:300,300i,400,400i,700,700i%7CSource+Code+Pro,+monospace:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter, sans-serif";--md-code-font:"Source Code Pro, monospace"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#01-getting-started-introduction-to-prefect-qiskit" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Prefect Qiskit Docs" class="md-header__button md-logo" aria-label="Prefect Qiskit Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Prefect Qiskit Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Getting Started
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/qiskit-community/prefect-qiskit" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    prefect-qiskit
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Overview

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  
  Tutorials

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../contribution/" class="md-tabs__link">
        
  
  
    
  
  Contributing

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../reference/" class="md-tabs__link">
        
  
  
    
  
  API Reference

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Prefect Qiskit Docs" class="md-nav__button md-logo" aria-label="Prefect Qiskit Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Prefect Qiskit Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/qiskit-community/prefect-qiskit" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    prefect-qiskit
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    <span class="md-ellipsis">
      Setup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#write-a-workflow-script" class="md-nav__link">
    <span class="md-ellipsis">
      Write a workflow script
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-qiskit-aer" class="md-nav__link">
    <span class="md-ellipsis">
      Use Qiskit Aer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-ibm-quantum" class="md-nav__link">
    <span class="md-ellipsis">
      Use IBM Quantum
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#see-also" class="md-nav__link">
    <span class="md-ellipsis">
      See Also
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contribution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="01-getting-started-introduction-to-prefect-qiskit">01. Getting Started Introduction to Prefect Qiskit</h1>
<p>This tutorial covers the end-to-end procedures for running a quantum experiment as a workflow. 
The workflow runs locally on your laptop.</p>
<h2 id="setup">Setup</h2>
<p>We recommend creating a dedicated virtual environment to install the plugin. 
This helps isolate dependencies and avoid conflicts with other projects.
Since both Prefect and Qiskit are dependencies, you don't need to install them separately.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This software requires Python 3.10+</p>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Python venv</label><label for="__tabbed_1_2">uv</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>python3.10<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>quantum_workflow
<span class="nb">source</span><span class="w"> </span>quantum_workflow/bin/activate
pip<span class="w"> </span>install<span class="w"> </span>prefect-qiskit
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>uv<span class="w"> </span>venv<span class="w"> </span>quantum_workflow<span class="w"> </span>-p<span class="w"> </span><span class="m">3</span>.10
<span class="nb">source</span><span class="w"> </span>quantum_workflow/bin/activate
uv<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>prefect-qiskit
</code></pre></div>
</div>
</div>
</div>
<p>Create a new Prefect profile for this tutorial. 
We use localhost for this example, but you can also use <a href="https://docs.prefect.io/v3/get-started/quickstart">Prefect Cloud</a> for more advanced features and scalability.</p>
<div class="highlight"><pre><span></span><code>prefect<span class="w"> </span>profile<span class="w"> </span>create<span class="w"> </span>qiskit
prefect<span class="w"> </span>profile<span class="w"> </span>use<span class="w"> </span>qiskit
prefect<span class="w"> </span>config<span class="w"> </span><span class="nb">set</span><span class="w"> </span><span class="nv">PREFECT_API_URL</span><span class="o">=</span><span class="s1">&#39;http://127.0.0.1:4200/api&#39;</span>
</code></pre></div>
<p>Start the Prefect server. You may need to wait a little while for the server to come up.</p>
<div class="highlight"><pre><span></span><code>prefect<span class="w"> </span>server<span class="w"> </span>start<span class="w"> </span>--host<span class="w"> </span><span class="m">127</span>.0.0.1<span class="w"> </span>--background
</code></pre></div>
<p>Register Prefect Blocks for Qiskit integrations. 
This will register the <code>QuantumRuntime</code> block and credential blocks for specific hardware vendors.</p>
<div class="highlight"><pre><span></span><code>prefect<span class="w"> </span>block<span class="w"> </span>register<span class="w"> </span>-m<span class="w"> </span>prefect_qiskit
prefect<span class="w"> </span>block<span class="w"> </span>register<span class="w"> </span>-m<span class="w"> </span>prefect_qiskit.vendors
</code></pre></div>
<p>Now you can find the Prefect console at <a href="http://127.0.0.1:4200/dashboard">http://127.0.0.1:4200/dashboard</a>.</p>
<h2 id="write-a-workflow-script">Write a workflow script</h2>
<p>Create a Python file.</p>
<div class="highlight"><pre><span></span><code>touch<span class="w"> </span>my-workflow.py
</code></pre></div>
<p>Add the following code block to the script file.</p>
<div class="highlight"><span class="filename">my-workflow.py</span><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="kn">from</span><span class="w"> </span><span class="nn">prefect</span><span class="w"> </span><span class="kn">import</span> <span class="n">flow</span><span class="p">,</span> <span class="n">task</span>
<span class="linenos" data-linenos=" 2 "></span><span class="kn">from</span><span class="w"> </span><span class="nn">prefect.variables</span><span class="w"> </span><span class="kn">import</span> <span class="n">Variable</span>
<span class="linenos" data-linenos=" 3 "></span><span class="kn">from</span><span class="w"> </span><span class="nn">prefect.logging</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_run_logger</span>
<span class="linenos" data-linenos=" 4 "></span><span class="kn">from</span><span class="w"> </span><span class="nn">prefect_qiskit</span><span class="w"> </span><span class="kn">import</span> <span class="n">QuantumRuntime</span>
<span class="linenos" data-linenos=" 5 "></span><span class="kn">from</span><span class="w"> </span><span class="nn">qiskit.circuit</span><span class="w"> </span><span class="kn">import</span> <span class="n">QuantumCircuit</span>
<span class="linenos" data-linenos=" 6 "></span><span class="kn">from</span><span class="w"> </span><span class="nn">qiskit.transpiler</span><span class="w"> </span><span class="kn">import</span> <span class="n">generate_preset_pass_manager</span>
<span class="linenos" data-linenos=" 7 "></span>
<span class="linenos" data-linenos=" 8 "></span>
<span class="linenos" data-linenos=" 9 "></span><span class="nd">@task</span>
<span class="linenos" data-linenos="10 "></span><span class="k">def</span><span class="w"> </span><span class="nf">transpile_task</span><span class="p">(</span><span class="n">circuit</span><span class="p">,</span> <span class="n">target</span><span class="p">):</span>
<span class="linenos" data-linenos="11 "></span>    <span class="n">pm</span> <span class="o">=</span> <span class="n">generate_preset_pass_manager</span><span class="p">(</span>
<span class="linenos" data-linenos="12 "></span>        <span class="n">optimization_level</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="linenos" data-linenos="13 "></span>        <span class="n">target</span><span class="o">=</span><span class="n">target</span><span class="p">,</span>
<span class="linenos" data-linenos="14 "></span>    <span class="p">)</span>
<span class="linenos" data-linenos="15 "></span>    <span class="k">return</span> <span class="n">pm</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">circuit</span><span class="p">)</span>
<span class="linenos" data-linenos="16 "></span>
<span class="linenos" data-linenos="17 "></span>
<span class="linenos" data-linenos="18 "></span><span class="nd">@flow</span>
<span class="linenos" data-linenos="19 "></span><span class="k">def</span><span class="w"> </span><span class="nf">sample_bell</span><span class="p">():</span>
<span class="linenos" data-linenos="20 "></span>    <span class="n">logger</span> <span class="o">=</span> <span class="n">get_run_logger</span><span class="p">()</span>
<span class="linenos" data-linenos="21 "></span>
<span class="linenos" data-linenos="22 "></span>    <span class="c1"># 1. Load QuantumRuntime from Prefect Server</span>
<span class="hll"><span class="linenos" data-linenos="23 "></span>    <span class="n">runtime</span> <span class="o">=</span> <span class="n">QuantumRuntime</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;default-runtime&quot;</span><span class="p">)</span>
</span><span class="hll"><span class="linenos" data-linenos="24 "></span>    <span class="n">options</span> <span class="o">=</span> <span class="n">Variable</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;sampler_options&quot;</span><span class="p">)</span>
</span><span class="linenos" data-linenos="25 "></span>
<span class="linenos" data-linenos="26 "></span>    <span class="c1"># 2. Create ISA quantum circuit</span>
<span class="linenos" data-linenos="27 "></span>    <span class="n">bell</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="linenos" data-linenos="28 "></span>    <span class="n">bell</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="linenos" data-linenos="29 "></span>    <span class="n">bell</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos" data-linenos="30 "></span>    <span class="n">bell</span><span class="o">.</span><span class="n">measure_all</span><span class="p">()</span>
<span class="linenos" data-linenos="31 "></span>    <span class="n">isa_circ</span> <span class="o">=</span> <span class="n">transpile_task</span><span class="p">(</span>
<span class="linenos" data-linenos="32 "></span>        <span class="n">circuit</span><span class="o">=</span><span class="n">bell</span><span class="p">,</span> 
<span class="linenos" data-linenos="33 "></span>        <span class="n">target</span><span class="o">=</span><span class="n">runtime</span><span class="o">.</span><span class="n">get_target</span><span class="p">(),</span>
<span class="linenos" data-linenos="34 "></span>    <span class="p">)</span>
<span class="linenos" data-linenos="35 "></span>
<span class="linenos" data-linenos="36 "></span>    <span class="c1"># 3. Execute workflow sampler</span>
<span class="linenos" data-linenos="37 "></span>    <span class="n">result</span> <span class="o">=</span> <span class="n">runtime</span><span class="o">.</span><span class="n">sampler</span><span class="p">([</span><span class="n">isa_circ</span><span class="p">],</span> <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>
<span class="linenos" data-linenos="38 "></span>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">meas</span><span class="o">.</span><span class="n">get_counts</span><span class="p">())</span>
<span class="linenos" data-linenos="39 "></span>
<span class="linenos" data-linenos="40 "></span>
<span class="linenos" data-linenos="41 "></span><span class="c1"># Run the flow</span>
<span class="linenos" data-linenos="42 "></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="linenos" data-linenos="43 "></span>    <span class="n">sample_bell</span><span class="p">()</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>In above example code, the program loads <code>runtime</code> and <code>options</code> data from the Prefect server.
This is a common practice in writing good software, where the configuration data is stored separately from the program, 
instead of hard-coding the configuration as part of the code. 
We will define configuration data later on the Prefect console.</p>
</div>
<h2 id="use-qiskit-aer">Use Qiskit Aer</h2>
<p>Qiskit Aer is a popular circuit simulator for Qiskit.
We start from testing the workflow with the simulator because real quantum processors may have a limited execution time allocation.</p>
<p>Before running your script, you need to provide configuration data. 
Open the Prefect console and navigate to the <a href="http://127.0.0.1:4200/blocks">Blocks</a> tab. 
Then, click the "Add Block" button and enter "Qiskit Aer Credentials" in the search window. 
Click the "Create" button on the card and fill in the necessary information as below.</p>
<p><img alt="" src="../images/aer_client.png" /></p>
<p>Setup the Aer credential with the following information.</p>
<div class="highlight"><pre><span></span><code><span class="nt">Block Name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my-aer-client&quot;</span>
<span class="nt">Number of Qubits</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="nt">Basis Gates</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;rz&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;sx&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;x&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;cz&quot;</span><span class="p p-Indicator">]</span>
<span class="nt">Apply Noise</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">Coupling Map Type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;linear&quot;</span>
</code></pre></div>
<p>Go back to the Blocks page, and create another block for Quantum Runtime. 
You can choose the <code>my-aer-client</code> from a drop-down menu.</p>
<p><img alt="" src="../images/runtime.png" /></p>
<p>Set up the runtime with the following information. 
Note that the block name must be <code>default-runtime</code> to align with the workflow script.
For Aer simulator, only <code>aer_simulator</code> is accepted for the resource name.</p>
<div class="highlight"><pre><span></span><code><span class="nt">Block Name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;default-runtime&quot;</span>
<span class="nt">Resource Name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;aer_simulator&quot;</span>
<span class="nt">Quantum Runtime Credentials</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-aer-client</span>
<span class="nt">Job Analytics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">Max Primitive Retry</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="nt">Retry Delay</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300</span>
<span class="nt">Execution Timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="nt">Execution Cache</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</code></pre></div>
<p>When the Blocks are created successfully, the console may look like this.</p>
<p><img alt="" src="../images/blocks.png" /></p>
<p>Next, create Prefect Variables. Navigate to the <a href="http://127.0.0.1:4200/variables">Variables</a> tab and click the "Add Variable" button. 
The Blocks are typed configuration documents with schema, and the Variables are free-form JSON input. </p>
<p>Create a new Variable with the following information.</p>
<div class="highlight"><pre><span></span><code><span class="nt">Name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sampler_options&quot;</span>
<span class="nt">Value</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&quot;default_shots&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">3000</span><span class="p p-Indicator">}</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Because primitive options are vendor-specific values, the common interface of runtime is designed to take a free-form dictionary. 
Schema validation is applied after the data is passed to the vendor-specific implementation of the runtime. 
Please refer to the runtime specification of each vendor for the data schema of primitive options.</p>
</div>
<p>Now you are ready to run the workflow with the Aer backend. Go back to the terminal and enter the command.</p>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>my-workflow.py
</code></pre></div>
<p>Navigate to the <a href="http://127.0.0.1:4200/runs">Run</a> tab of the console, 
and you will find a new entry for the <code>sample-bell</code> workflow with auto-generated unique name.</p>
<p><img alt="" src="../images/workflow_runs.png" /></p>
<p>Click the task name to open the status of the workflow execution. 
You can check logs and artifacts. 
If your workflow has input parameters, these are also recorded in the Parameters tab.</p>
<p><img alt="" src="../images/run_bell_aer.png" /></p>
<p>With the above runtime settings, a <code>job-metrics</code> artifact is automatically created, and you can find it in the Artifacts tab.
This artifact shows statistics of quantum job execution.</p>
<h2 id="use-ibm-quantum">Use IBM Quantum</h2>
<p>We will run the same workflow on one of the IBM Quantum devices.
Visit to the <a href="https://quantum.cloud.ibm.com/">IBM Quantum Platform</a> to generate an API key and copy the cloud resolution name (CRN) of your instance. 
Check out the <a href="https://quantum.cloud.ibm.com/docs/en/guides/instances">IBM Documentation</a> for details. 
A list of resource names are also available on your quantum instance.</p>
<p>As with the Qiskit Aer Credentials, find "IBM Quantum Credentials" from the Block catalogue. 
Create a new Block with the API key and CRN. 
The URLs for the authentication endpoint and runtime endpoint can be left empty unless you need custom endpoints.</p>
<div class="highlight"><pre><span></span><code><span class="nt">Block Name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my-ibm-client&quot;</span>
<span class="nt">API Key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;your api key&gt;</span>
<span class="nt">Cloud Resolution Name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;your crn&gt;</span>
<span class="nt">Authentication Endpoint URL</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="nt">Runtime Endpoint URL</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
</code></pre></div>
<p>On the <code>default-runtime</code> Block window, click "Edit" to replace the Aer credentials with the IBM credentials.</p>
<p><img alt="" src="../images/runtime_edit.png" /></p>
<p>Choose the <code>my-ibm-client</code> from the drop-down menu.
Also, replace the Resource Name value with one of the available resources in your cloud instance (e.g. <code>ibm_torino</code>).
Save it after the credential and resource name are updated.</p>
<p>Then, edit the <code>sampler_options</code> Variable with the new value. The following format conforms to the IBM Quantum Runtime API data schema.</p>
<div class="highlight"><pre><span></span><code><span class="nt">Name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sampler_options&quot;</span>
<span class="nt">Value</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&quot;params&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&quot;shots&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">3000</span><span class="p p-Indicator">}}</span>
</code></pre></div>
<p>Go back to terminal and enter the command.</p>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>my-workflow.py
</code></pre></div>
<p>Now you are running the same experiment on real quantum hardware. 
In this way, you can run experiments on any hardware or with any sampler options without editing the source code.</p>
<p>After all experiments are completed, terminate the Prefect server.</p>
<div class="highlight"><pre><span></span><code>prefect<span class="w"> </span>server<span class="w"> </span>stop
</code></pre></div>
<h2 id="see-also">See Also</h2>
<p>In this tutorial, you run the workflow as a local Python script. 
If the experiment takes longer to run or needs to be run on a regular basis, it becomes hard to manage such local Python processes. </p>
<p>In such a situation, you can deploy the workflow to a self-hosted remote workflow server or Prefect Cloud. 
Visit <a href="https://docs.prefect.io/v3/deploy">Prefect Deploy Guide</a> to find instructions.</p>
<p>Experiment results can be also saved as <a href="https://docs.prefect.io/v3/develop/artifacts">Artifacts</a>.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "content.code.annotate", "search.highlight", "search.suggest", "navigation.instant", "navigation.tabs", "navigation.top", "navigation.sections", "toc.integrate"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>